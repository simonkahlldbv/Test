    /* ------------------------------
       VISUELLER VERGLEICHS-SLIDER
    ------------------------------ */

    // Style für den Slider einfügen
    const compareStyle = document.createElement("style");
    compareStyle.innerHTML = `
      #compare-slider-wrapper {
        position: absolute;
        top: 0;
        left: 0;
        height: 90vh;
        width: 100%;
        pointer-events: none;
        display: none;
      }

      #compare-slider-line {
        position: absolute;
        top: 0;
        height: 100%;
        width: 3px;
        background: red;
        pointer-events: auto;
        cursor: ew-resize;
      }

      #comparison-left,
      #comparison-right {
        position: absolute;
        top: 0;
        height: 100%;
        overflow: hidden;
        pointer-events: auto;
      }

      #comparison-left {
        left: 0;
        width: 50%;
      }

      #comparison-right {
        right: 0;
        width: 50%;
      }
    `;
    document.head.appendChild(compareStyle);

    // Slider-HTML erzeugen
    const compareOverlay = document.createElement("div");
    compareOverlay.id = "compare-slider-wrapper";
    compareOverlay.innerHTML = `
      <div id="comparison-left"></div>
      <div id="comparison-right"></div>
      <div id="compare-slider-line"></div>
    `;
    document.body.appendChild(compareOverlay);

    // Wenn Vergleich gestartet wird -> Slider aktivieren & Modelle einsortieren
    const origStartComparison = startComparison;
    startComparison = function() {
      origStartComparison();

      setTimeout(() => {
        const wrapper = document.getElementById("compare-slider-wrapper");
        wrapper.style.display = "block";

        const leftContainer = document.getElementById("comparison-left");
        const rightContainer = document.getElementById("comparison-right");

        leftContainer.innerHTML = "";
        rightContainer.innerHTML = "";

        leftContainer.appendChild(document.getElementById("model-viewer-left"));
        rightContainer.appendChild(document.getElementById("model-viewer-right"));

      }, 100);
    };

    // Vergleich beenden -> Slider ausblenden
    const origEndComparison = endComparison;
    endComparison = function() {
      document.getElementById("compare-slider-wrapper").style.display = "none";
      origEndComparison();
    };

    // Slider-Bewegungslogik
    const slider = document.getElementById("compare-slider-line");
    let dragging = false;

    slider.addEventListener("mousedown", () => dragging = true);
    slider.addEventListener("touchstart", () => dragging = true);

    window.addEventListener("mouseup", () => dragging = false);
    window.addEventListener("touchend", () => dragging = false);

    window.addEventListener("mousemove", moveSlider);
    window.addEventListener("touchmove", moveSlider);

    function moveSlider(e) {
      if (!dragging) return;

      let x = e.clientX;
      if (e.touches) x = e.touches[0].clientX;

      const wrapper = document.getElementById("compare-slider-wrapper");
      const rect = wrapper.getBoundingClientRect();

      let pos = x - rect.left;
      pos = Math.max(50, Math.min(rect.width - 50, pos)); // Randbereich

      slider.style.left = pos + "px";
      document.getElementById("comparison-left").style.width = pos + "px";
      document.getElementById("comparison-right").style.width = (rect.width - pos) + "px";
    }

